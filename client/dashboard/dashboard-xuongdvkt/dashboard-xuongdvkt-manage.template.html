<pre style="display:block;" ng-if="false">
	{{pageData.source.newSuaChua | json }}
</pre>
<form style="padding: 30px 48px 48px;" id="nav_quan_ly" class="input-form">
	<div style="text-align:right;">
		<span>
			<i class="md-icon material-icons no-animate btn-manage-mode" ng-class="{'btn-manage-mode-active': (pageOptions.displayMode.current_manage_mode === 'createNew')}" ng-click="pageOptions.displayMode.current_manage_mode = 'createNew'">&#xE145;</i>
			<i class="md-icon material-icons no-animate btn-manage-mode" ng-class="{'btn-manage-mode-active': (pageOptions.displayMode.current_manage_mode === 'addNew_ma_tbs')}" ng-click="pageOptions.displayMode.current_manage_mode = 'addNew_ma_tbs'">&#xE03B;</i>
			<i class="md-icon material-icons no-animate btn-manage-mode" ng-class="{'btn-manage-mode-active': (pageOptions.displayMode.current_manage_mode === 'update')}" ng-click="pageOptions.displayMode.current_manage_mode = 'update'">&#xE254;</i>
		</span>	
	</div>
	<div id="nav_quan_ly_addNew_matbs" ng-show="pageOptions.displayMode.current_manage_mode === 'addNew_ma_tbs'">
		<pre style="display:block;" ng-if="false">
			{{pageData.source.newMatb | json }}
		</pre>
		<h3 style="margin-top:0;">Thêm mã phương tiện</h3>
		<div class="uk-grid uk-margin-small-top">
			<div class="uk-width-medium-1-3">
				<div class="uk-form-stacked">
					<label for="newsuachua_phanloai_loaisuachua">Loại phương tiện</label>
					<select kendo-drop-down-list style="width: 100%;" id="suachua_addNew_ma_tbs_nhom_tb"
			        	k-value-primitive="true"
						k-ng-model="pageData.source.newMatb.container.group"
						k-filter="'contains'"
						k-index="-1"
			            k-data-source="_dictionary.loai_tbs[pageData.source.newSuaChua.phan_loai.nhom_tb]">
					</select>
				</div>
			</div>
			<div class="uk-width-medium-1-3">
				<div class="uk-form-row uk-form-stacked">
			        <label>Mã phương tiện</label>
			        <input type="text" class="k-textbox" style="width: 100%;" ng-model="pageData.source.newMatb.container.text"/>
			    </div>
			</div>
			<div class="uk-width-medium-1-3">
				<div class="uk-form-row uk-form-stacked">
			        <label>Mã ĐVQL</label>
			        <input type="text" class="k-textbox" style="width: 100%;" ng-model="pageData.source.newMatb.container.ref"/>
			    </div>
			</div>
		</div>
		<div class="uk-grid uk-margin-small-top">
			<div class="uk-width-medium-2-3">
				<button class="btn-create-new" ng-click="methods.manage.insertNewMatb();">TẠO MỚI</button>
				<button class="btn-reset" ng-click="utils.reset.newMatb(pageData.source.newMatb);">RESET</button>
			</div>
		</div>
	</div>
	<div id="nav_quan_ly_createNew" class="uk-margin-medium-top" ng-show="pageOptions.displayMode.current_manage_mode === 'createNew' || pageOptions.displayMode.current_manage_mode === 'addNew_ma_tbs'">
		<h3>Phân loại</h3>
		<div class="uk-grid uk-margin-small-top">
			<div class="uk-width-medium-1-3">
				<div class="uk-form-stacked">
					<label for="newsuachua_phanloai_loaisuachua">Loại sửa chữa</label>
					<select kendo-drop-down-list style="width: 100%;" id="newsuachua_phanloai_loaisuachua"
			        	k-value-primitive="true"
						k-ng-model="pageData.source.newSuaChua.phan_loai.loai_sua_chua"
						k-filter="'contains'"
						k-index="-1"
			            k-data-source="_dictionary.loai_sua_chuas">
					</select>
				</div>
			</div>
			<div class="uk-width-medium-1-3">
			    <div class="uk-form-stacked">
			        <label for="newsuachua_phanloai_loaitb">Loại phương tiện</label>
			        <select kendo-drop-down-list style="width: 100%;" id="newsuachua_phanloai_loaitb"
			        	k-value-primitive="true"
						k-ng-model="pageData.source.newSuaChua.phan_loai.loai_tb"
						k-filter="'contains'"
						k-index="-1"
			            k-data-source="_dictionary.loai_tbs[pageData.source.newSuaChua.phan_loai.nhom_tb]">
			        </select>
			    </div>
			</div>
			<div class="uk-width-medium-1-3">
			    <div class="uk-form-stacked">
			        <label for="newsuachua_phanloai_loaitb">Mã phương tiện</label>
			        <select kendo-drop-down-list style="width: 100%;" id="newsuachua_phanloai_matb"
			            k-ng-model="pageData.source.newSuaChua.ma_tb"
			            k-data-text-field="'ma_tb'"
			            k-filter="'contains'"
			            k-index="-1"
			            k-data-source="pageOptions.ui.selectOptions.ma_tbs[pageData.source.newSuaChua.phan_loai.loai_tb]">
			        </select>
			    </div>
			</div>
		</div>
		<div class="uk-grid uk-margin-small-top">
			<div class="uk-width-medium-1-3">
			    <div class="uk-form-stacked">
			        <label class="label-open-khuvuc-modal-helper" data-uk-modal="{target: '#modal_xuongdvkt_dashboard_khuvucs_helper'}">Khu vực</label>
			        <select kendo-drop-down-list style="width: 100%;" id="newsuachua_diadiem_khuvuc"
			        	k-ng-model="pageData.source.newSuaChua.dia_diem.khu_vuc"
			            k-value-primitive="true"
			            k-filter="'contains'"
			            k-index="-1"
			            k-data-source="_dictionary.khu_vucs">
			        </select>
			    </div>
			</div>
			<div class="uk-width-medium-1-3">
			    <div class="uk-form-stacked">
			        <label for="newsuachua_diadiem_vitri">Vị trí</label>
			        <select kendo-drop-down-list style="width: 100%;" id="newsuachua_diadiem_vitri"
			        	k-ng-model="pageData.source.newSuaChua.dia_diem.vi_tri"
			        	k-value-primitive="true"
			            k-filter="'contains'"
			            k-index="-1"
			            k-data-source="pageData.kendoOptions.dataSource.vi_tris.isAvailable[pageData.source.newSuaChua.dia_diem.khu_vuc]">
			            <!-- Chú ý sửa datasource ở đây: chỉ lọc các giá trị đang trống -->
			        </select>
			    </div>
			</div>
		</div>
		<h3>Sửa chữa</h3>
		<div class="uk-grid uk-margin-small-top">
			<div class="uk-width-medium-2-3">
			    <div class="uk-form-row uk-form-stacked">
			        <label>Nội dung sửa chữa</label>
			        <input type="text" class="k-textbox" style="width: 100%;" ng-model="pageData.source.newSuaChua.noi_dung"/>
			    </div>
			</div>
			<div class="uk-width-medium-1-3">
			    <div class="uk-form-row">
			        <label>TGSC dự kiến (h)</label>
			        <input kendo-numeric-text-box style="width: 100%;" 
			            k-min="0"
			            k-max="1000"
			            k-step="0.25"
			            k-ng-model="pageData.source.newSuaChua.thoi_gian.sua_chua_du_kien" />
			    </div>
			</div>		
		</div>
		
		<div class="uk-grid uk-margin-medium-top">
			<div class="uk-width-medium-2-3">
				<button class="btn-create-new" ng-click="methods.manage.insert();">TẠO MỚI</button>
				<button class="btn-reset" ng-click="utils.reset.newSuaChua(pageData.source.newSuaChua);">RESET</button>
			</div>
		</div>
	</div>
	<div id="nav_quan_ly_update" ng-show="pageOptions.displayMode.current_manage_mode === 'update'">
		<h3 style="margin-top:0;" class="no-animate" ng-hide="pageData.source.master._id">Cập nhật phương tiện</h3>
		<p ng-hide="pageData.source.master._id" class="no-animate">Vui lòng chọn một lượt sửa chữa có trong danh sách kế bên để tiến hành cập nhật.</p>
		<h3 style="margin-top:0;" class="no-animate" ng-show="pageData.source.master._id">{{pageData.source.selectedSuaChua.phan_loai.loai_sua_chua}} {{pageData.source.selectedSuaChua.ma_tb.ma_tb}}</h3>
		<dl class="uk-description-list-horizontal" ng-show="pageData.source.master._id">
		    <div ng-show="pageData.source.master.trang_thai == 'Sửa chữa xong'">
		    	<dt>Nội dung</dt>
		    	<dd style="color: #888;">{{pageData.source.selectedSuaChua.noi_dung}}</dd>
		    </div>
		    <div ng-class="{'uk-margin-medium-top': pageData.source.master.trang_thai == 'Sửa chữa xong'}">
		    	<dt >Vị trí</dt>
		    	<dd style="color: #888;">{{pageData.source.selectedSuaChua.dia_diem.khu_vuc}} : {{pageData.source.selectedSuaChua.dia_diem.vi_tri}}</dd>	
		    </div>		    
		    <dt>Thời gian vào</dt>
		    <dd style="color: #888;">{{pageData.source.selectedSuaChua.thoi_gian.bat_dau | displayDate:'calendar'}}</dd>
		    <div ng-hide="pageData.source.master.trang_thai == 'Sửa chữa xong'">
		    	<dt>Dự kiến bàn giao</dt>
		    	<dd style="color: #888;">{{pageData.source.selectedSuaChua.thoi_gian.ket_thuc_du_kien | displayDate:'calendar'}}</dd>
		    </div>		    
	    	<div ng-show="pageData.source.master.trang_thai == 'Sửa chữa xong'">
	    		<dt>Thời gian ra</dt>
		    	<dd style="color: #888;">{{pageData.source.selectedSuaChua.thoi_gian.ket_thuc | displayDate:'calendar'}}</dd>
		    	<dt>Thời gian dự kiến</dt>
		    	<dd style="color: #888;">{{pageData.source.selectedSuaChua.thoi_gian.sua_chua_du_kien | number: 2}} giờ</dd>
		    	<dt>Thời gian sửa chữa</dt>
		    	<dd style="color: #888;">{{pageData.source.selectedSuaChua.thong_ke.thoi_gian.sua_chua.thuc_te | number: 2}} giờ</dd>
		    	<dt class="uk-margin-medium-top">Ghi chú</dt>
		    	<dd class="uk-margin-medium-top" style="color: #888;"><span ng-hide="pageData.source.master.ghi_chu">Không có ghi chú cho lượt sửa chữa này.</span> {{pageData.source.selectedSuaChua.ghi_chu}}</dd>	
	    	</div>	    	
		</dl>
		
		<div class="uk-form-row uk-form-stacked uk-margin-medium-top uk-margin-medium-bottom">
			<div class="btn-group-manage-update-trang-thai">
				<button class="btn-danger" ng-class="{ 'color-mode-danger': (pageData.source.selectedSuaChua.trang_thai == 'Đang sửa chữa') }" ng-click="pageData.source.selectedSuaChua.trang_thai = 'Đang sửa chữa'">Đang sửa chữa</button>
				<button class="btn-warning" ng-class="{ 'color-mode-warning': (pageData.source.selectedSuaChua.trang_thai == 'Chuẩn bị bàn giao') }" ng-click="pageData.source.selectedSuaChua.trang_thai = 'Chuẩn bị bàn giao'">Chuẩn bị bàn giao</button>
				<button class="btn-success" ng-class="{ 'color-mode-success': (pageData.source.selectedSuaChua.trang_thai == 'Sửa chữa xong') }" ng-click="pageData.source.selectedSuaChua.trang_thai = 'Sửa chữa xong'">Sửa chữa xong</button>	
			</div>			
		</div>
		<div ng-hide="pageData.source.master.trang_thai == 'Sửa chữa xong'">
			<div class="uk-grid uk-margin-small-top">
				<div class="uk-width-medium-2-3">
				    <div class="uk-form-row uk-form-stacked">
				        <label>Nội dung sửa chữa</label>
				        <input type="text" class="k-textbox" style="width: 100%;" ng-model="pageData.source.selectedSuaChua.noi_dung"/>
				    </div>
				</div>
				<div class="uk-width-medium-1-3">
				    <div class="uk-form-row">
				        <label class="label-toggle-tgsc" ng-show="config.update.inputForm.isTGSCLabel" ng-click="config.update.inputForm.isTGSCLabel=false;">TGSC dự kiến (h)</label>
				        <input class="input-toggle-tgsc" ng-show="config.update.inputForm.isTGSCLabel" kendo-numeric-text-box style="width: 100%;" 
				            k-min="0"
				            k-max="1000"
				            k-step="0.25"
				            k-ng-model="pageData.source.selectedSuaChua.thoi_gian.sua_chua_du_kien" />
				        <label class="label-toggle-tgsc" ng-hide="config.update.inputForm.isTGSCLabel" ng-click="config.update.inputForm.isTGSCLabel=true;">Dự kiến bàn giao trong ... (ph)</label>
				        <input class="input-toggle-tgsc" ng-hide="config.update.inputForm.isTGSCLabel" kendo-numeric-text-box style="width: 100%;" 
				            k-decimal="0"
				            k-format="'n0'"
				            k-min="0"
				            k-max="1000"
				            k-step="5"
				            k-ng-model="config.update.inputForm.tgscDuKienBanGiao"/>
				    </div>
				</div>		
			</div>
			<div class="uk-grid uk-margin-small-top">
				<div class="uk-width-medium-2-3">
				    <div class="uk-form-row uk-form-stacked">
				        <label>Viết ghi chú</label>
				        <input type="text" class="k-textbox" style="width: 100%;" ng-model="pageData.source.selectedSuaChua.ghi_chu"/>
				    </div>
				</div>		
			</div>
			<div class="uk-grid uk-margin-medium-top" ng-hide="pageData.source.master.trang_thai == 'Sửa chữa xong'">
				<div class="uk-width-medium-2-3">
					<button class="btn-create-new" ng-click="methods.manage.update()">CẬP NHẬT</button>
					<button class="btn-reset" ng-click="methods.manage.resetSelected(pageData.source.selectedSuaChua._id)">RESET</button>
				</div>
			</div>	
		</div>		
	</div>
</form>

<dashboard-xuongdvkt-modal-khuvucs-helper></dashboard-xuongdvkt-modal-khuvucs-helper>

